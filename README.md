# FPS-GameServer
一个用于双人网络联机对战的H5小游戏
得分点
1. 在血量为 0 时能播放死亡动画，并发送结果给服务器记录 (包括
服务器端代码，及协议编写)。(5) √
2. 能同步血量；(5) √
3. 能以 2 秒每次的频率向服务器发送心跳协议；(5)√
3. 向服务器发送注册申请、用户名空格检查；(5) √
4. 已存在用户名的显示；(5) √
5. 登录：用户已登录的显示 (包括服务器端代码);(5) √
6. 登录：密码错误的显示 (包括服务器端代码);(5) √
7. 在原游戏项目的基础上添加房间系统场景及场景跳转；(5) √
8. 能接收服务器发来的房间列表；(5) √
9. 能用某种方式显示房间列表；(5) √
10. 能用某种方式选中某房间，并发送进入房间协议；(5) √
八、考察要求
11. 能接收服务器发来的开始游戏协议，并进入游戏；(5) √
12. 进入游戏后保持心跳协议的发送不停；(5) √
13. 能初始化两个 hero 的站位；(5) √
14. 能同步位置；(5) √
15. 能同步 hero 朝向；(5) 
16. 能同步开火；(5) √
17.Rocket 击中 hero 时能减少血量；(5) √
18.hero2 的血条跟随 (5) 
19. 以对称加密方式进行数据包的加密传输；(5) √
20. 以 Json 格式序列化和反序列化字符串协议；或用 Protobuff
格式编写应用层协议 (5, 加上 3 的 5 分) √

![alt text](image.png)
登录通过用户名检查密码，密码错误则提示错误
![alt text](image-1.png)
通过用户名检查是否已登录，已登录则提示已登录

# 考察要求按项目流程排序（启动到游戏结束）

## 1. 注册登录阶段
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 1 | 3 | 向服务器发送注册申请、用户名空格检查； | 5 |
| 2 | 4 | 已存在用户名的显示； | 5 |
| 3 | 5 | 登录：用户已登录的显示 (包括服务器端代码); | 5 |
| 4 | 6 | 登录：密码错误的显示 (包括服务器端代码); | 5 |

## 2. 房间系统阶段
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 5 | 7 | 在原游戏项目的基础上添加房间系统场景及场景跳转； | 5 |
| 6 | 8 | 能接收服务器发来的房间列表； | 5 |
| 7 | 9 | 能用某种方式显示房间列表； | 5 |
| 8 | 10 | 能用某种方式选中某房间，并发送进入房间协议； | 5 |

## 3. 游戏准备阶段
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 9 | 11 | 能接收服务器发来的开始游戏协议，并进入游戏； | 5 |
| 10 | 13 | 能初始化两个hero的站位； | 5 |

## 4. 游戏进行阶段
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 11 | 3 | 能以2秒每次的频率向服务器发送心跳协议； | 5 |
| 12 | 12 | 进入游戏后保持心跳协议的发送不停； | 5 |
| 13 | 14 | 能同步位置； | 5 |
| 14 | 15 | 能同步hero朝向； | 5 |
| 15 | 16 | 能同步开火； | 5 |
| 16 | 17 | Rocket击中hero时能减少血量； | 5 |
| 17 | 2 | 能同步血量； | 5 |
| 18 | 18 | hero2的血条跟随 | 5 |

## 5. 游戏结束阶段
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 19 | 1 | 在血量为0时能播放死亡动画，并发送结果给服务器记录（包括服务器端代码，及协议编写）。 | 5 |

## 6. 贯穿全程的基础要求
| 排序 | 原序号 | 考察要求 | 分数 |
|------|--------|----------|------|
| 20 | 19 | 以对称加密方式进行数据包的加密传输； | 5 |
| 21 | 20 | 以Json格式序列化和反序列化字符串协议；或用Protobuff格式编写应用层协议 (加上3的5分) | 10 |

## 排序说明
1. **注册登录阶段**：项目启动后，用户首先需要注册或登录，这是游戏的入口
2. **房间系统阶段**：登录成功后，用户进入房间系统，进行房间的创建、查看和加入
3. **游戏准备阶段**：进入房间后，等待房主开始游戏，然后初始化游戏状态
4. **游戏进行阶段**：游戏开始后，保持心跳连接，同步各种游戏状态（位置、朝向、开火等）
5. **游戏结束阶段**：当玩家血量为0时，播放死亡动画并结束游戏
6. **基础要求**：协议格式和加密传输贯穿整个游戏流程，是网络通信的基础

该排序遵循了从项目启动到游戏结束的自然流程，便于理解和实现各个功能模块。



### 1. 连接流程
1. 客户端注册/登录
2. 获取房间列表
3. 创建或加入房间
4. 等待游戏开始
5. 建立WebSocket连接
6. 发送心跳请求（每2秒）
7. 接收游戏开始通知
8. 同步游戏状态
9. 发送游戏动作
10. 接收游戏结果